# README

### Requirements

This project is based on **Python 3.12**

Packages listed below should also be installed using **pip** before the application can run properly.

- Django 5.1.2
- PyMySQL 1.1.1 (db connection)
- django-crispy-form 2.3 (form rendering)
- django-bootstrap4 2024.10 (form rendering)
- haversine 2.8.1 (distance calculation based on latitude and longitude)
- matplotlib 3.9.2 (visualisation)
- pandas 2.2.3 (visualisation)
- kaleido 0.2.1 (visualisation)

The packages above and their dependencies are included in a text file **requirements.txt**, which can be used to install the packages automatically.

Another file generated by conda named **conda_env.yml** is also provided for reference.

### Using virtual environment-venv (macOS/Linux)

You will first need virtualenv installed:

```bash
pip install virtualenv
```

Next step is to switch to your .venv in the root project directory:

```bash
source .venv/bin/activate
```

Your terminal should have (.venv) as the prefix before anything else.

Next step is to install requirements.txt inside the .venv:

```bash
pip install -r requirements.txt
```

Then within the terminal, navigate to where manage.py is located: ~/E-VEHICLE-SHARE-SYSTEM/e_vehicle_proj/

Then run the following command to run the project:

```bash
python manage.py runserver
```

### Using virtual environment-conda (macOS/Linux)

First, you need to get either **Anaconda** or **Miniconda** downloaded and installed on your computer

Although working on base environment can be fine, we highly recommend that you create a new virtual environment instead:

```bash
conda create -n your_env_name python=3.12
```

 After that, you can activate the virtual environment:

```bash
conda activate your_env_name
```

Now you can choose between manually installing the required packages one by one with pip, and automatically installing them from **requirements.txt**:

```bash
pip install -r requirements.txt
```

Then, navigate to where manage.py is located and execute the following command to run the server

```bash
python manage.py runserver
```

### Secret File

In our development we use a secret file that is not uploaded to Gitlab. It contains details (like username and password) of how we connect to database server, google map api server, and smtp server.

The file is called secrets.py and it looks like this:

```python
db_details = {
    'ENGINE': '',
    'NAME': '',
    'USER': '',
    'PASSWORD': '',
    'HOST': '',
    'PORT': '',
}
google_maps_api_key = ''
email_details={
    'EMAIL_BACKEND': '',
    'EMAIL_HOST': '',
    'EMAIL_PORT': ,
    'EMAIL_USE_TLS': ,
    'EMAIL_HOST_USER': '',
    'EMAIL_HOST_PASSWORD': '',
    'DEFAULT_FROM_EMAIL': '',
}
```

In order for our project to be executed and graded properly, we'll add secrets.py to the upload file. It will be in the directory ***e-vehicle-share-system/e_vehicle_proj/e_vehicle_proj***

If you are using completely different settings on db, map api, or email, you can remove the call to secrets.py in settings.py and add your own settings.

For example, we once changed the email backend to "django.core.mail.backends.console.EmailBackend" to print the email content directly to console for testing purpose.

### Database Connection Warning

We use a mysql database on DigitalOcean server. It is somehow **unavailable for on-campus network connection.** The solutions are:

1. Run the proj from outside the campus, or
2. Use a hot spot if you have to run it on campus

### Access Control

We have set up an access control that prevents users from accessing pages that should only be browsed by users in other groups.

Given this, you need to login as users in different groups to browse all our webpages.

A group of usernames and passwords of test users are provided for you in the text file **"username_passwords_for_test.txt"**
